var sixel=function(t){var e={};function r(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=1)}([function(t,e,r){"use strict";
/**
 * Copyright (c) 2019 Joerg Breitbart.
 * @license MIT
 */function n(t){return 255&(e.BIG_ENDIAN?t>>>24:t)}function a(t){return 255&(e.BIG_ENDIAN?t>>>16:t>>>8)}function i(t){return 255&(e.BIG_ENDIAN?t>>>8:t>>>16)}function s(t,r,n,a=255){return e.BIG_ENDIAN?((255&t)<<24|(255&r)<<16|n%255<<8|255&a)>>>0:((255&a)<<24|(255&n)<<16|(255&r)<<8|255&t)>>>0}function o(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function h(t,r,n){return e.BIG_ENDIAN?(Math.round(t/100*255)<<24|Math.round(r/100*255)<<16|Math.round(n/100*255)<<8|255)>>>0:(4278190080|Math.round(n/100*255)<<16|Math.round(r/100*255)<<8|Math.round(t/100*255))>>>0}Object.defineProperty(e,"__esModule",{value:!0}),e.BIG_ENDIAN=255===new Uint8Array(new Uint32Array([4278190080]).buffer)[0],e.red=n,e.green=a,e.blue=i,e.alpha=function(t){return 255&(e.BIG_ENDIAN?t:t>>>24)},e.toRGBA8888=s,e.fromRGBA8888=function(t){return e.BIG_ENDIAN?[t>>>24,t>>16&255,t>>8&255,255&t]:[255&t,t>>8&255,t>>16&255,t>>>24]},e.nearestColorIndex=function(t,e){const r=n(t),s=a(t),o=i(t);let h=Number.MAX_SAFE_INTEGER,l=-1;for(let t=0;t<e.length;++t){const n=r-e[t][0],a=s-e[t][1],i=o-e[t][2],u=n*n+a*a+i*i;if(!u)return t;u<h&&(h=u,l=t)}return l},e.normalizeRGB=h,e.normalizeHLS=function(t,r,n){return function(t,r,n){let a,i,s;if(0===n)a=i=s=r;else{const e=r<.5?r*(1+n):r+n-r*n,h=2*r-e;a=o(h,e,t+1/3),i=o(h,e,t),s=o(h,e,t-1/3)}return e.BIG_ENDIAN?(Math.round(255*a)<<24|Math.round(255*i)<<16|Math.round(255*s)<<8|255)>>>0:(4278190080|Math.round(255*s)<<16|Math.round(255*i)<<8|Math.round(255*a))>>>0}((t+240)/360-1,r/100,n/100)},e.PALETTE_VT340_COLOR=[h(0,0,0),h(20,20,80),h(80,13,13),h(20,80,20),h(80,20,80),h(20,80,80),h(80,80,20),h(53,53,53),h(26,26,26),h(33,33,60),h(60,26,26),h(33,60,33),h(60,33,60),h(33,60,60),h(60,60,33),h(80,80,80)],e.PALETTE_VT340_GREY=[h(0,0,0),h(13,13,13),h(26,26,26),h(40,40,40),h(6,6,6),h(20,20,20),h(33,33,33),h(46,46,46),h(0,0,0),h(13,13,13),h(26,26,26),h(40,40,40),h(6,6,6),h(20,20,20),h(33,33,33),h(46,46,46)],e.PALETTE_ANSI_256=(()=>{const t=[s(0,0,0),s(205,0,0),s(0,205,0),s(205,205,0),s(0,0,238),s(205,0,205),s(0,250,205),s(229,229,229),s(127,127,127),s(255,0,0),s(0,255,0),s(255,255,0),s(92,92,255),s(255,0,255),s(0,255,255),s(255,255,255)],e=[0,95,135,175,215,255];for(let r=0;r<6;++r)for(let n=0;n<6;++n)for(let a=0;a<6;++a)t.push(s(e[r],e[n],e[a]));for(let e=8;e<=238;e+=10)t.push(s(e,e,e));return t})(),e.DEFAULT_BACKGROUND=s(0,0,0,255)},function(t,e,r){"use strict";
/**
 * Copyright (c) 2019 Joerg Breitbart.
 * @license MIT
 */Object.defineProperty(e,"__esModule",{value:!0});var n=r(0);e.toRGBA8888=n.toRGBA8888,e.fromRGBA8888=n.fromRGBA8888,e.DEFAULT_BACKGROUND=n.DEFAULT_BACKGROUND,e.PALETTE_ANSI_256=n.PALETTE_ANSI_256,e.PALETTE_VT340_COLOR=n.PALETTE_VT340_COLOR,e.PALETTE_VT340_GREY=n.PALETTE_VT340_GREY;var a=r(2);e.SixelDecoder=a.SixelDecoder;var i=r(3);e.sixelEncode=i.sixelEncode,e.introducer=i.introducer,e.FINALIZER=i.FINALIZER},function(t,e,r){"use strict";
/**
 * Copyright (c) 2019 Joerg Breitbart.
 * @license MIT
 */Object.defineProperty(e,"__esModule",{value:!0});const n=r(0),a=[];for(let t=0;t<64;++t){const e=[];1&t&&e.push(0),2&t&&e.push(1),4&t&&e.push(2),8&t&&e.push(3),16&t&&e.push(4),32&t&&e.push(5),a.push(e)}class i{constructor(t=4){this.cursor=0,this.width=0,this.data=new Uint32Array(6*t)}get memUsage(){return 4*this.data.length}getHeight(){for(let t=5;t>=0;--t){const e=6*this.width+t;for(let r=t;r<e;r+=6)if(this.data[r])return t+1}return 0}put(t,e,r){let n=6*this.cursor;const i=n+6*r-6;if(i>=this.data.length){let t=this.data.length;for(;i>=(t*=2););const e=new Uint32Array(t);e.set(this.data),this.data=e}if(this.cursor+=r,this.width=Math.max(this.width,this.cursor),t){const i=a[t],s=i.length;for(;r--;){for(let t=0;t<s;++t)this.data[n+i[t]]=e;n+=6}}}copyPixelRow(t,e,r,n,a){const i=Math.min(this.width,n+a);let s=6*n+r,o=0;for(let r=n;r<i;++r)(o=this.data[s])&&(t[e+r]=o),s+=6}}function s(t,e){let r=e-t;const n=new Array(r);for(;r--;)n[r]=--e;return n}class o{constructor(t){this.table=new Uint8Array(t)}add(t,e,r,n){this.table[e<<7|t]=r<<4|n}addMany(t,e,r,n){for(let a=0;a<t.length;a++)this.table[e<<7|t[a]]=r<<4|n}}const h=(()=>{const t=new o(512),e=s(0,4);let r;for(r in e)t.addMany(s(0,128),r,0,r);return t.addMany(s(63,127),0,1,0),t.add(33,0,0,1),t.add(34,0,0,2),t.add(35,0,0,3),t.add(36,0,2,0),t.add(45,0,3,0),t.addMany(s(48,58),1,5,1),t.addMany(s(63,127),1,4,0),t.add(33,1,6,1),t.addMany(s(48,58),2,5,2),t.add(59,2,6,2),t.addMany(s(63,127),2,7,0),t.add(33,2,7,1),t.add(34,2,7,2),t.add(35,2,7,3),t.add(36,2,7,0),t.add(45,2,7,0),t.addMany(s(48,58),3,5,3),t.add(59,3,6,3),t.addMany(s(63,127),3,7,0),t.add(33,3,7,1),t.add(34,3,7,2),t.add(35,3,7,3),t.add(36,3,7,0),t.add(45,3,7,0),t})();class l{constructor(){this.length=1,this.params=new Uint32Array(32)}reset(){this.params[0]=0,this.length=1}addParam(){this.params[this.length++]=0}addDigit(t){this.params[this.length-1]=10*this.params[this.length-1]+t}}e.SixelDecoder=class{constructor(t=n.DEFAULT_BACKGROUND,e=Object.assign([],n.PALETTE_VT340_COLOR),r=65536){this.fillColor=t,this.palette=e,this.paletteLimit=r,this.bands=[],this.rasterRatioNumerator=0,this.rasterRatioDenominator=0,this.rasterWidth=0,this.rasterHeight=0,this._initialState=0,this._currentState=this._initialState,this._params=new l,this._currentColor=this.palette[0],this._currentBand=new i,this.bands.push(this._currentBand)}get width(){return this.rasterWidth||this.realWidth}get height(){return this.rasterHeight||this.realHeight}get realWidth(){return Math.max.apply(null,this.bands.map(t=>t.width))}get realHeight(){return 1!==this.bands.length||this.bands[0].getHeight()?6*(this.bands.length-1)+this.bands[this.bands.length-1].getHeight()||6:0}get memUsage(){return this.bands.reduce((t,e)=>t+e.memUsage,0)}decodeString(t,e=0,r=t.length){(!this._buffer||this._buffer.length<r-e)&&(this._buffer=new Uint8Array(r-e));let n=0;for(let a=e;a<r;++a)this._buffer[n++]=t.charCodeAt(a);this.decode(this._buffer,0,n)}decode(t,e=0,r=t.length){let a=this._currentState,s=this._currentBand,o=this._currentColor,l=this._params;for(let u=e;u<r;++u){let e=127&t[u];const r=h.table[a<<7|e];switch(r>>4){case 1:s.put(e-63,o,1);break;case 0:break;case 5:l.addDigit(e-48);break;case 7:if(3===a){if(1===l.length)o=this.palette[l.params[0]%this.paletteLimit]>>>0;else if(5===l.length&&(l.params[1]<3&&1===l.params[1]?l.params[2]<=360:l.params[2]<=100&&l.params[2]<=100&&l.params[3]<=100))switch(l.params[1]){case 2:this.palette[l.params[0]%this.paletteLimit]=o=n.normalizeRGB(l.params[2],l.params[3],l.params[4]);break;case 1:this.palette[l.params[0]%this.paletteLimit]=o=n.normalizeHLS(l.params[2],l.params[3],l.params[4]);break;case 0:o=this.palette[l.params[0]%this.paletteLimit]>>>0}}else 2===a&&(1!==this.bands.length||s.cursor||4===l.length&&(this.rasterRatioNumerator=l.params[0],this.rasterRatioDenominator=l.params[1],this.rasterWidth=l.params[2],this.rasterHeight=l.params[3]));l.reset(),0==(15&r)&&e>62&&e<127&&s.put(e-63,o,1);break;case 4:let t=0;for(let e=0;e<l.length;++e)t+=l.params[e]||1;s.put(e-63,o,t),l.reset();break;case 2:s.cursor=0;break;case 6:l.addParam();break;case 3:s=new i(this.width||4),this.bands.push(s)}a=15&r}this._currentState=a,this._currentColor=o,this._params=l,this._currentBand=s}toPixelData(t,e,r,n=0,a=0,i=0,s=0,o=this.width,h=this.height,l=this.fillColor){if(n<0||a<0||i<0||s<0||o<0||h<0)throw new Error("negative values are invalid");if(e*r*4!==t.length)throw new Error("wrong geometry of target");if(n>=e||a>=r)return t;if(i>=this.width||s>=this.height)return t;if(o=Math.min(o,e-n,this.width),h=Math.min(h,r-a,this.height),o<=0||h<=0)return t;const u=new Uint32Array(t.buffer);let d=s%6,c=s/6|0,f=0;for(;c<this.bands.length&&f<h;){const t=(a+f)*e+n;l&&u.fill(l,t,t+o),this.bands[c].copyPixelRow(u,t-i,d,i,o),d++,f++,6===d&&(c++,d=0)}if(l)for(;f<h;){const t=(a+f)*e+n;u.fill(l,t,t+o),f++}return t}}},function(t,e,r){"use strict";
/**
 * Copyright (c) 2019 Joerg Breitbart.
 * @license MIT
 */Object.defineProperty(e,"__esModule",{value:!0});const n=r(0);function a(t,e){const r=String.fromCharCode(t+63);return e>3?"!"+e+r:3===e?r+r+r:2===e?r+r:r}function i(t,e,r,i,s,o){const h=new Int8Array(o.length+1),l=new Uint8Array(o.length+1),u=new Uint16Array(o.length+1),d=new Int16Array(o.length+1);h.fill(-1),u.fill(1),d.fill(-1);const c=[],f=[];let p=0,g=0;for(let m=0;m<i;++m){const _=e+m;let A=0;l.fill(0,0,c.length);for(let e=0;e<r;++e){const r=t[_+A];r!==p&&(p=r,g=n.alpha(r)?s.get(r):0,void 0===g&&(g=n.nearestColorIndex(r,o)+1,s.set(r,g)),-1===d[g]&&(f.push([]),m&&(h[c.length]=0,u[c.length]=m),d[g]=c.length,c.push(g))),l[d[g]]|=1<<e,A+=i}for(let t=0;t<c.length;++t)l[t]===h[t]?u[t]++:(~h[t]&&f[t].push(a(h[t],u[t])),h[t]=l[t],u[t]=1)}for(let t=0;t<c.length;++t)h[t]&&f[t].push(a(h[t],u[t]));const m=[];for(let t=0;t<c.length;++t)c[t]&&m.push("#"+(c[t]-1)+f[t].join("")+"$");return m.join("")}e.introducer=function(t=0){return`P0;${t};q`},e.FINALIZER="\\",e.sixelEncode=function(t,e,r,a,s=!0){if(!t.length||!e||!r)return"";if(e*r*4!==t.length)throw new Error("wrong geometry of data");if(!a||!a.length)throw new Error("palette must not be empty");const o=[0],h=[];for(let t=0;t<a.length;++t){let e=a[t];if("number"==typeof e){if(!n.alpha(e))continue;e=n.toRGBA8888(...n.fromRGBA8888(e))}else e=n.toRGBA8888(...e);~o.indexOf(e)||(o.push(e),h.push(n.fromRGBA8888(e).slice(0,-1)))}const l=[];s&&l.push(`"1;1;${e};${r}`);for(let[t,[e,r,n]]of h.entries())l.push(`#${t};2;${Math.round(e/255*100)};${Math.round(r/255*100)};${Math.round(n/255*100)}`);const u=new Map(o.map((t,e)=>[t,e])),d=[],c=new Uint32Array(t.buffer);for(let t=0;t<r;t+=6)d.push(i(c,t*e,r-t>=6?6:r-t,e,u,h));return l.push(d.join("-\n")),l.join("")}}]);